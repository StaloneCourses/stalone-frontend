<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Forgot Password - Stalone</title>
<style>
  body { 
    background:#000; 
    color:#fff; 
    font-family:Arial,sans-serif;
    display:flex; 
    justify-content:center; 
    align-items:center; 
    height:100vh; 
  }
  .container { 
    background:#111; 
    padding:30px; 
    border-radius:12px;
    box-shadow:0 0 10px #00f5ff; 
    width:350px; 
    position:relative; 
  }
  .container h2 { 
    text-align:center; 
    margin-bottom:20px; 
  }
  input { 
    width:100%; 
    padding:10px; 
    margin:8px 0; 
    border-radius:6px; 
    border:none;
    background:#222; 
    color:#fff; 
  }
  input:focus { 
    box-shadow:0 0 5px #00f5ff; 
  }
  button { 
    width:100%; 
    padding:12px; 
    margin-top:10px; 
    border:none; 
    border-radius:6px;
    background:#00f5ff; 
    color:#000; 
    font-weight:bold; 
    cursor:pointer; 
  }
  button:hover { 
    box-shadow:0 0 10px #00f5ff; 
  }
  .back { 
    position:absolute; 
    top:10px; 
    left:10px; 
    color:#00f5ff; 
    cursor:pointer; 
  }
  .links { 
    margin-top:15px; 
    text-align:center; 
  }
  .links a { 
    color:#00f5ff; 
    text-decoration:none; 
    display:block; 
    margin:5px 0; 
  }
  #forgotMsg {color:limegreen; margin-top:10px; display:none;}
  #forgotError {color:#ff4c4c; margin-top:10px; display:none;}
</style>
</head>
<body>
  <div class="container">
    <div class="back" onclick="history.back()">‚Üê Back</div>
    <h2>Forgot Password</h2>
    <form id="forgotForm">
      <input type="email" placeholder="Enter your email" name="email" required />
      <button type="submit" id="forgotBtn">Send Reset Link</button>
      <p id="forgotMsg"></p>
      <p id="forgotError"></p>
    </form>
    <p style="text-align:center; margin-top:10px;">
      Remembered password? <a href="login.html">Login here</a>
    </p>
  </div>

<script>
  const form = document.getElementById("forgotForm");
  const forgotBtn = document.getElementById("forgotBtn");
  const forgotMsg = document.getElementById("forgotMsg");
  const forgotError = document.getElementById("forgotError");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    forgotMsg.style.display = "none";
    forgotError.style.display = "none";
    forgotBtn.disabled = true;
    forgotBtn.textContent = "Sending link...";

    const data = { email: form.email.value };

    try {
      const res = await fetch("http://localhost:5000/api/auth/forgot-password", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      });
      const result = await res.json();

      if (res.ok) {
        forgotMsg.textContent = "Reset link sent successfully! Check your email.";
        forgotMsg.style.display = "block";
        form.reset();
      } else {
        forgotError.textContent = result.message || "Failed to send reset link";
        forgotError.style.display = "block";
      }
    } catch (err) {
      forgotError.textContent = "Server error. Please try again later.";
      forgotError.style.display = "block";
      console.error(err);
    } finally {
      forgotBtn.disabled = false;
      forgotBtn.textContent = "Send Reset Link";
    }
  });
</script>
</body>
</html>
